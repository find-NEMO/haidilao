name: CI

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: Run a multi-line script
      run: |
        #!/usr/bin/env sh

        # abort on errors
        set -e

        cd haidilao_app
        npm install @vue/cli
        # build
        npm run build
    - name: copy files
      uses: appleboy/scp-action@master
      with:
        host: 121.36.9.253
        username: root
        password: ${{secrets.hwp}}
        port: 22
        source: "haidilao_app/dist/*"
        target: "haidilao"
        rm: true
