name: CI

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: Run a one-line script
      run: echo Hello, world!
    - name: Run a multi-line script
      run: |
        #!/usr/bin/env sh

        # abort on errors
        set -e

        cd haidilao_app
        npm install @vue/cli
        # build
        npm run build

        # navigate into the build output directory
        cd dist

        # if you are deploying to a custom domain
        # echo 'www.example.com' > CNAME

        git init
        git add -A
        git commit -m 'deploy'

        # if you are deploying to https://<USERNAME>.github.io
        # git push -f git@github.com:<USERNAME>/<USERNAME>.github.io.git master

        # if you are deploying to https://<USERNAME>.github.io/<REPO>
         git push -f https://github.com/ChaunceyCheng/haidilao.git master:gh-pages

        cd -
